/** * Created by wolyshaw on 15/11/4. */var express = require('express');var path = require('path');var wan = require('./schemas/wan');var port = process.env.PORT || 3000;var app = express();app.use(express.static('public'));var bodyParser = require('body-parser');app.use(bodyParser.json());app.use(bodyParser.urlencoded({ extended: true }));app.set('views', './views');app.set('view engine', 'jade');app.listen(port);console.log('run on port : ' + port);app.get('/', function(req, res){  var sql =  'SELECT * FROM `test3` ORDER BY `id` DESC';  wan.getData(sql,function(err, item){    res.render('index', {      title: 'nodeJs',      data:item    })  });});app.get('/upload', function(req, res){    res.render('up', {      title: '上传'      // data:item    })});app.get('/p/:id', function(req, res){  var id = req.params.id;  var sql =  'SELECT * FROM `test3` WHERE `id` = '+id;  wan.getData(sql,function(err, item){    res.render('post', {      title: 'p'+id,      data : item    })  });});app.post('/content/new', function(req, res) {  wan.upData(req, res);  res.send(req.body);});